<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Christmas Postcard Creator</title>
  <meta name="description" content="Generate a watercolor Christmas postcard with a recipient name, a wish, and a custom message." />
  <link rel="stylesheet" href="styles.css" />

  <style>
    :root{
      --bg1: #0b2a20;
      --bg2: #0a1020;
      --cardSolid: rgba(12,14,22,.92);
      --card: rgba(255,255,255,.06);
      --card2: rgba(0,0,0,.25);
      --border: rgba(255,255,255,.16);
      --muted: rgba(255,255,255,.80);
      --muted2: rgba(255,255,255,.70);
      --accent: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.94);
    }

    body{
      min-height: 100vh;
      background:
        radial-gradient(1200px 600px at 15% 10%, rgba(255,180,90,.18), transparent 55%),
        radial-gradient(900px 520px at 85% 15%, rgba(140,210,255,.14), transparent 60%),
        radial-gradient(900px 600px at 40% 95%, rgba(140,255,190,.10), transparent 60%),
        linear-gradient(145deg, var(--bg1), var(--bg2));
      color: var(--text);
    }

    .header{ padding: 14px 14px 0; }
    .brand h1{ margin:0; letter-spacing:.01em; }

    .subtitle{
      margin: 6px 0 0;
      opacity: .92;
      max-width: 72ch;
      font-size: 15px;
      line-height: 1.45;
    }

    .badge-row{
      display:flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .badge{
      border: 1px solid var(--border);
      background: var(--accent);
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      opacity: .95;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }

    .card{
      margin-top: 14px;
      background: linear-gradient(180deg, var(--card), var(--card2));
      border: 1px solid var(--border);
      box-shadow:
        0 10px 30px rgba(0,0,0,.28),
        inset 0 1px 0 rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      display: grid;
      grid-template-columns: 1.6fr 1fr;
      gap: 16px;
    }
    @media (max-width: 860px){
      .card{ grid-template-columns: 1fr; }
    }

    /* ‚úÖ Make the form area pop */
    .form{
      background: var(--cardSolid);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      padding: 16px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
    }

    .form label span{
      font-size: 12px;
      letter-spacing: .12em;
      opacity: .9;
      font-weight: 800;
    }

    .form input{
      border: 1px solid rgba(255,255,255,.20);
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-size: 16px;
      font-weight: 650;
      padding: 12px 12px;
      border-radius: 12px;
      outline: none;
    }
    .form input::placeholder{
      color: rgba(255,255,255,.60);
      font-weight: 550;
    }
    .form input:focus{
      border-color: rgba(255,255,255,.36);
      background: rgba(255,255,255,.085);
    }

    .hint{
      margin-top: 6px;
      font-size: 12px;
      color: var(--muted2);
      line-height: 1.35;
    }

    .row{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    button{
      border: 1px solid rgba(255,255,255,.20);
      background: rgba(255,255,255,.12);
      color: var(--text);
      font-weight: 800;
      padding: 11px 14px;
      border-radius: 12px;
      cursor: pointer;
    }
    button:hover{ filter: brightness(1.08); }
    button.secondary{
      background: rgba(255,255,255,.07);
      font-weight: 750;
    }

    .status{
      margin: 10px 0 0;
      font-size: 13px;
      color: var(--muted);
      min-height: 18px;
    }

    .preview{ margin-top: 14px; }
    .imgbox{
      border: 1px dashed rgba(255,255,255,.25);
      background:
        radial-gradient(500px 250px at 40% 30%, rgba(255,255,255,.08), transparent 60%),
        rgba(0,0,0,.18);
      border-radius: 14px;
      padding: 10px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 400px;
    }
    .imgbox img{
      width: 100%;
      height: auto;
      display: block;
      border-radius: 10px;
    }

    .meta{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .link{
      color: rgba(255,255,255,.92);
      text-decoration: underline;
      cursor: pointer;
      font-weight: 750;
      opacity: .95;
    }

    .footer small{ color: var(--muted2); }
  </style>
</head>

<body>
  <main class="wrap">
    <header class="header">
      <div class="brand">
        <h1>Christmas Postcard Creator üéÑ</h1>
      </div>

      <p class="subtitle">
        Generate a watercolor Christmas postcard with the <b>recipient‚Äôs name</b>, a <b>wish</b>, and a <b>custom message</b>.
      </p>

      <div class="badge-row" aria-hidden="true">
        <span class="badge">Watercolor + gouache</span>
        <span class="badge">Printed postcard feel</span>
        <span class="badge">Legible typography</span>
      </div>
    </header>

    <section class="card">
      <form id="form" class="form">
        <label>
          <span>RECIPIENT NAME</span>
          <input id="name" name="name" type="text" placeholder="Alex" maxlength="60" required />
          <div class="hint">The name that will appear on the postcard greeting.</div>
        </label>

        <label>
          <span>WISH</span>
          <input id="wish" name="wish" type="text" placeholder="a British green Aston Martin" maxlength="180" required />
          <div class="hint">This will be depicted visually on the right side as the ‚Äúgift made real‚Äù.</div>
        </label>

        <label>
          <span>MESSAGE</span>
          <input id="message" name="message" type="text" placeholder="Merry Christmas from your favorite uncle üòÑ" maxlength="120" required />
          <div class="hint">A small extra line, bottom-left inside the cream border.</div>
        </label>

        <div class="row">
          <button id="generate" type="submit">Generate postcard</button>
          <button id="rand" type="button" class="secondary">Random example</button>
          <button id="downloadBtn" type="button" class="secondary" disabled>Download</button>
        </div>

        <p id="status" class="status" aria-live="polite"></p>
      </form>

      <div class="preview">
        <div class="imgbox">
          <img id="img" alt="Generated postcard will appear here" />
        </div>
        <div class="meta">
          <span id="seed"></span>
          <a id="download" class="link" download="postcard.jpg" href="#" style="display:none;">Download image</a>
        </div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>

  <script>
    (function () {
      const randBtn = document.getElementById('rand');
      const nameEl = document.getElementById('name');
      const wishEl = document.getElementById('wish');
      const msgEl  = document.getElementById('message');
      const imgEl  = document.getElementById('img');
      const dlBtn  = document.getElementById('downloadBtn');
      const dlLink = document.getElementById('download');

      const names = ["Alex", "Marta", "Daniel", "Sof√≠a", "Chris", "Noah", "Emma", "Leo", "Nina", "Sam"];
      const wishes = [
        "a cozy cabin in a snowy forest with warm amber lights",
        "a British green Aston Martin parked beside the tree",
        "a golden ticket to a dream trip to Japan",
        "a beautiful grand piano with sheet music and candlelight",
        "a stack of finished novels with a fountain pen",
        "a rescue dog with a red scarf and a tiny gift box",
        "a vintage telescope aimed at a starry winter sky",
        "a small sailboat on calm moonlit water (as a miniature gift)",
        "a painter‚Äôs easel with a half-finished winter landscape",
        "a pair of elegant headphones with shimmering bokeh lights"
      ];
      const messages = [
        "Merry Christmas from your favorite uncle üòÑ",
        "Wishing you a joyful holiday season!",
        "Hope you love it ‚Äî Merry Christmas!",
        "Warm wishes and big smiles ‚ú®",
        "May your Christmas be bright and calm.",
        "Enjoy your gift!",
        "Sending you good vibes üéÑ",
        "Merry Christmas ‚Äî all the best!",
        "A little magic for you ‚ú®",
        "Wishing you peace and joy."
      ];

      randBtn.addEventListener('click', () => {
        nameEl.value = names[Math.floor(Math.random() * names.length)];
        wishEl.value = wishes[Math.floor(Math.random() * wishes.length)];
        msgEl.value  = messages[Math.floor(Math.random() * messages.length)];
        document.getElementById('form').requestSubmit();
      });

      function enableDownloadUI(){
        const ok = !!imgEl.src && imgEl.src !== window.location.href;
        dlBtn.disabled = !ok;
        dlLink.style.display = ok ? "inline" : "none";
        if (ok) dlLink.href = imgEl.src;
      }

      imgEl.addEventListener('load', enableDownloadUI);

      dlBtn.addEventListener('click', async () => {
        if (!imgEl.src) return;

        // Try "real download" via Blob. If CORS blocks it, fallback to opening the image.
        try{
          const res = await fetch(imgEl.src, { mode: "cors" });
          if (!res.ok) throw new Error("download failed");

          const blob = await res.blob();
          const url = URL.createObjectURL(blob);

          const a = document.createElement('a');
          a.href = url;
          a.download = "postcard.jpg";
          document.body.appendChild(a);
          a.click();
          a.remove();

          setTimeout(() => URL.revokeObjectURL(url), 1000);
        }catch(e){
          window.open(imgEl.src, "_blank", "noopener,noreferrer");
        }
      });

      // Initial state
      enableDownloadUI();
    })();
  </script>
</body>
</html>
